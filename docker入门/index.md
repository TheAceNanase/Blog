# Docker入门

## 什么是Docker
Docker 最初是 dotCloud 公司创始人 Solomon Hykes 在法国期间发起的一个公司内部项目，它是基于 dotCloud 公司多年云服务技术的一次革新，并于 2013 年 3 月以 Apache 2.0 授权协议开源 ，主要项目代码在 GitHub 上进行维护。Docker 项目后来还加入了 Linux 基金会，并成立推动 开放容器联盟（OCI）。

Docker 自开源后受到广泛的关注和讨论，至今其 GitHub 项目已经超过 5 万 4 千个星标和一万多个 fork。甚至由于 Docker 项目的火爆，在 2013 年底，dotCloud 公司决定改名为 Docker。

Docker 最初是在 Ubuntu 12.04 上开发实现的；Red Hat 则从 RHEL 6.5 开始对 Docker 进行支持；Google 也在其 PaaS 产品中广泛应用 Docker。

Docker 使用 Google 公司推出的 Go 语言进行开发实现，基于 Linux 内核的 cgroup ，namespace ，以及 OverlayFS 类的 Union FS 等技术，对进程进行封装隔离，属于操作系统层面的虚拟化技术。由于隔离的进程独立于宿主和其它的隔离的进程，因此也称其为容器。最初实现是基于 LXC ，从 0.7 版本以后开始去除 LXC，转而使用自行开发的 libcontainer ，从 1.11 开始，则进一步演进为使用 runC 和 containerd 。


docker是一个开源的应用容器引擎，基于go语言开发并遵循了apache2.0协议开源。docker可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的linux服务器，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口（类iphone的app），并且容器开销极其低。

### **为什么docker越来越受欢迎**

官方话语：

* 容器化越来越受欢迎，因为容器是：
  * 灵活：即使是最复杂的应用也可以集装箱化。
  * 轻量级：容器利用并共享主机内核。
  * 可互换：您可以即时部署更新和升级。
  * 便携式：您可以在本地构建，部署到云，并在任何地方运行。
  * 可扩展：您可以增加并自动分发容器副本。
  * 可堆叠：您可以垂直和即时堆叠服务。



* 镜像和容器（contalners）

通过镜像启动一个容器，一个镜像是一个可执行的包，其中包括运行应用程序所需要的所有内容包含代码，运行时间，库、环境变量、和配置文件。容器是镜像的运行实例，当被运行时有镜像状态和用户进程，可以使用docker ps 查看。



* 容器和虚拟机

容器时在linux上本机运行，并与其他容器共享主机的内核，它运行的一个独立的进程，不占用其他任何可执行文件的内存，非常轻量。

虚拟机运行的是一个完成的操作系统，通过虚拟机管理程序对主机资源进行虚拟访问，相比之下需要的资源更多。

![](https://pic2.zhimg.com/v2-0327d6666507f8716c3d3630fa4cb671_b.jpg)

### **6、docker版本**

Docker Community Edition（CE）社区版Enterprise Edition(EE) 商业版

### **7、docker和openstack的几项对比**

![](https://pic2.zhimg.com/v2-05f095dff1275a596738fc3460d57cd5_b.jpg)

### **8、容器在内核中支持2种重要技术**

docker本质就是宿主机的一个进程，docker是通过namespace实现资源隔离，通过cgroup实现资源限制，通过写时复制技术（copy-on-write）实现了高效的文件操作（类似虚拟机的磁盘比如分配500g并不是实际占用物理磁盘500g）1）namespaces 名称空间

![](https://pic2.zhimg.com/v2-cbc6bb7f3aaa073bc5cbd18848e69741_b.jpg) 2）control Group 控制组

cgroup的特点是：　

* cgroup的api以一个伪文件系统的实现方式，用户的程序可以通过文件系统实现cgroup的组件管理
* cgroup的组件管理操作单元可以细粒度到线程级别，另外用户可以创建和销毁cgroup，从而实现资源载分配和再利用
* 所有资源管理的功能都以子系统的方式实现，接口统一子任务创建之初与其父任务处于同一个cgroup的控制组

四大功能：

* 资源限制：可以对任务使用的资源总额进行限制
* 优先级分配：通过分配的cpu时间片数量以及磁盘IO带宽大小，实际上相当于控制了任务运行优先级
* 资源统计：可以统计系统的资源使用量，如cpu时长，内存用量等
* 任务控制：cgroup可以对任务执行挂起、恢复等操作






