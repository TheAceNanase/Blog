<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>åˆ†å¸ƒå¼è¿›ç¨‹ - ğŸ’—Nanase</title><meta name="Description" content="åˆ†å¸ƒå¼è¿›ç¨‹å°±æ˜¯å¤šå°æœºå™¨åˆ›å»ºè¿›ç¨‹è”åˆæ‰§è¡Œä»»åŠ¡ã€‚"><meta property="og:title" content="åˆ†å¸ƒå¼è¿›ç¨‹" />
<meta property="og:description" content="åˆ†å¸ƒå¼è¿›ç¨‹å°±æ˜¯å¤šå°æœºå™¨åˆ›å»ºè¿›ç¨‹è”åˆæ‰§è¡Œä»»åŠ¡ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://www.nishinonanase.xyz/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B/" />
<meta property="og:image" content="http://www.nishinonanase.xyz/logo.png"/>
<meta property="article:published_time" content="2016-04-30T15:46:34+08:00" />
<meta property="article:modified_time" content="2016-04-30T15:46:34+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://www.nishinonanase.xyz/logo.png"/>

<meta name="twitter:title" content="åˆ†å¸ƒå¼è¿›ç¨‹"/>
<meta name="twitter:description" content="åˆ†å¸ƒå¼è¿›ç¨‹å°±æ˜¯å¤šå°æœºå™¨åˆ›å»ºè¿›ç¨‹è”åˆæ‰§è¡Œä»»åŠ¡ã€‚"/>
<meta name="application-name" content="ğŸ’—Nanase">
<meta name="apple-mobile-web-app-title" content="ğŸ’—Nanase"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://www.nishinonanase.xyz/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B/" /><link rel="prev" href="http://www.nishinonanase.xyz/threadlocal/" /><link rel="next" href="http://www.nishinonanase.xyz/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "åˆ†å¸ƒå¼è¿›ç¨‹",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/www.nishinonanase.xyz\/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B\/"
        },"genre": "posts","keywords": "Python","wordcount":  2089 ,
        "url": "http:\/\/www.nishinonanase.xyz\/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B\/","datePublished": "2016-04-30T15:46:34+08:00","dateModified": "2016-04-30T15:46:34+08:00","publisher": {
            "@type": "Organization",
            "name": "Nanase","logo": "http:\/\/www.nishinonanase.xyz\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "Nanase"
            },"description": "åˆ†å¸ƒå¼è¿›ç¨‹å°±æ˜¯å¤šå°æœºå™¨åˆ›å»ºè¿›ç¨‹è”åˆæ‰§è¡Œä»»åŠ¡ã€‚"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="ğŸ’—Nanase">ğŸ’—Nanase</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> ğŸ‘å…¨éƒ¨æ–‡ç«  </a><a class="menu-item" href="/tags/"> ğŸŠæ ‡ç­¾ </a><a class="menu-item" href="/categories/"> ğŸ“åˆ†ç±» </a><a class="menu-item" href="/about/"> ğŸ¥å…³äº </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="ğŸ’—Nanase">ğŸ’—Nanase</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">ğŸ‘å…¨éƒ¨æ–‡ç« </a><a class="menu-item" href="/tags/" title="">ğŸŠæ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">ğŸ“åˆ†ç±»</a><a class="menu-item" href="/about/" title="">ğŸ¥å…³äº</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">åˆ†å¸ƒå¼è¿›ç¨‹</h1><h2 class="single-subtitle">åˆ†å¸ƒå¼è¿›ç¨‹ </h2><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://www.nishinonanase.xyz/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>Nanase</a></span>&nbsp;<span class="post-category">æ”¶å½•äº <a href="/categories/%E5%9F%BA%E7%A1%80%E7%90%86%E8%AE%BA/"><i class="far fa-folder fa-fw"></i>åŸºç¡€ç†è®º</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2016-04-30">2016-04-30</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 2089 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 5 åˆ†é’Ÿ&nbsp;<span id="/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B/" class="leancloud_visitors" data-flag-title="åˆ†å¸ƒå¼è¿›ç¨‹">
                        <i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;æ¬¡é˜…è¯»
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li><a href="#å°ç»“">å°ç»“</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>åœ¨Threadå’ŒProcessä¸­ï¼Œåº”å½“ä¼˜é€‰Processï¼Œå› ä¸ºProcessæ›´ç¨³å®šï¼Œè€Œä¸”ï¼ŒProcesså¯ä»¥åˆ†å¸ƒåˆ°å¤šå°æœºå™¨ä¸Šï¼Œè€ŒThreadæœ€å¤šåªèƒ½åˆ†å¸ƒåˆ°åŒä¸€å°æœºå™¨çš„å¤šä¸ªCPUä¸Šã€‚</p>
<p>Pythonçš„<code>multiprocessing</code>æ¨¡å—ä¸ä½†æ”¯æŒå¤šè¿›ç¨‹ï¼Œå…¶ä¸­<code>managers</code>å­æ¨¡å—è¿˜æ”¯æŒæŠŠå¤šè¿›ç¨‹åˆ†å¸ƒåˆ°å¤šå°æœºå™¨ä¸Šã€‚ä¸€ä¸ªæœåŠ¡è¿›ç¨‹å¯ä»¥ä½œä¸ºè°ƒåº¦è€…ï¼Œå°†ä»»åŠ¡åˆ†å¸ƒåˆ°å…¶ä»–å¤šä¸ªè¿›ç¨‹ä¸­ï¼Œä¾é ç½‘ç»œé€šä¿¡ã€‚ç”±äº<code>managers</code>æ¨¡å—å°è£…å¾ˆå¥½ï¼Œä¸å¿…äº†è§£ç½‘ç»œé€šä¿¡çš„ç»†èŠ‚ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°ç¼–å†™åˆ†å¸ƒå¼å¤šè¿›ç¨‹ç¨‹åºã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœæˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªé€šè¿‡<code>Queue</code>é€šä¿¡çš„å¤šè¿›ç¨‹ç¨‹åºåœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼Œç°åœ¨ï¼Œç”±äºå¤„ç†ä»»åŠ¡çš„è¿›ç¨‹ä»»åŠ¡ç¹é‡ï¼Œå¸Œæœ›æŠŠå‘é€ä»»åŠ¡çš„è¿›ç¨‹å’Œå¤„ç†ä»»åŠ¡çš„è¿›ç¨‹åˆ†å¸ƒåˆ°ä¸¤å°æœºå™¨ä¸Šã€‚æ€ä¹ˆç”¨åˆ†å¸ƒå¼è¿›ç¨‹å®ç°ï¼Ÿ</p>
<p>åŸæœ‰çš„<code>Queue</code>å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œä½†æ˜¯ï¼Œé€šè¿‡<code>managers</code>æ¨¡å—æŠŠ<code>Queue</code>é€šè¿‡ç½‘ç»œæš´éœ²å‡ºå»ï¼Œå°±å¯ä»¥è®©å…¶ä»–æœºå™¨çš„è¿›ç¨‹è®¿é—®<code>Queue</code>äº†ã€‚</p>
<p>æˆ‘ä»¬å…ˆçœ‹æœåŠ¡è¿›ç¨‹ï¼ŒæœåŠ¡è¿›ç¨‹è´Ÿè´£å¯åŠ¨<code>Queue</code>ï¼ŒæŠŠ<code>Queue</code>æ³¨å†Œåˆ°ç½‘ç»œä¸Šï¼Œç„¶åå¾€<code>Queue</code>é‡Œé¢å†™å…¥ä»»åŠ¡ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># task_master.py

import random, time, queue
from multiprocessing.managers import BaseManager

# å‘é€ä»»åŠ¡çš„é˜Ÿåˆ—:
task_queue = queue.Queue()
# æ¥æ”¶ç»“æœçš„é˜Ÿåˆ—:
result_queue = queue.Queue()

# ä»BaseManagerç»§æ‰¿çš„QueueManager:
class QueueManager(BaseManager):
    pass

# æŠŠä¸¤ä¸ªQueueéƒ½æ³¨å†Œåˆ°ç½‘ç»œä¸Š, callableå‚æ•°å…³è”äº†Queueå¯¹è±¡:
QueueManager.register(&#39;get_task_queue&#39;, callable=lambda: task_queue)
QueueManager.register(&#39;get_result_queue&#39;, callable=lambda: result_queue)
# ç»‘å®šç«¯å£5000, è®¾ç½®éªŒè¯ç &#39;abc&#39;:
manager = QueueManager(address=(&#39;&#39;, 5000), authkey=b&#39;abc&#39;)
# å¯åŠ¨Queue:
manager.start()
# è·å¾—é€šè¿‡ç½‘ç»œè®¿é—®çš„Queueå¯¹è±¡:
task = manager.get_task_queue()
result = manager.get_result_queue()
# æ”¾å‡ ä¸ªä»»åŠ¡è¿›å»:
for i in range(10):
    n = random.randint(0, 10000)
    print(&#39;Put task %d...&#39; % n)
    task.put(n)
# ä»resulté˜Ÿåˆ—è¯»å–ç»“æœ:
print(&#39;Try get results...&#39;)
for i in range(10):
    r = result.get(timeout=10)
    print(&#39;Result: %s&#39; % r)
# å…³é—­:
manager.shutdown()
print(&#39;master exit.&#39;)
</code></pre></td></tr></table>
</div>
</div><p>è¯·æ³¨æ„ï¼Œå½“æˆ‘ä»¬åœ¨ä¸€å°æœºå™¨ä¸Šå†™å¤šè¿›ç¨‹ç¨‹åºæ—¶ï¼Œåˆ›å»ºçš„<code>Queue</code>å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨ï¼Œä½†æ˜¯ï¼Œåœ¨åˆ†å¸ƒå¼å¤šè¿›ç¨‹ç¯å¢ƒä¸‹ï¼Œæ·»åŠ ä»»åŠ¡åˆ°<code>Queue</code>ä¸å¯ä»¥ç›´æ¥å¯¹åŸå§‹çš„<code>task_queue</code>è¿›è¡Œæ“ä½œï¼Œé‚£æ ·å°±ç»•è¿‡äº†<code>QueueManager</code>çš„å°è£…ï¼Œå¿…é¡»é€šè¿‡<code>manager.get_task_queue()</code>è·å¾—çš„<code>Queue</code>æ¥å£æ·»åŠ ã€‚</p>
<p>ç„¶åï¼Œåœ¨å¦ä¸€å°æœºå™¨ä¸Šå¯åŠ¨ä»»åŠ¡è¿›ç¨‹ï¼ˆæœ¬æœºä¸Šå¯åŠ¨ä¹Ÿå¯ä»¥ï¼‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># task_worker.py

import time, sys, queue
from multiprocessing.managers import BaseManager

# åˆ›å»ºç±»ä¼¼çš„QueueManager:
class QueueManager(BaseManager):
    pass

# ç”±äºè¿™ä¸ªQueueManageråªä»ç½‘ç»œä¸Šè·å–Queueï¼Œæ‰€ä»¥æ³¨å†Œæ—¶åªæä¾›åå­—:
QueueManager.register(&#39;get_task_queue&#39;)
QueueManager.register(&#39;get_result_queue&#39;)

# è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œtask_master.pyçš„æœºå™¨:
server_addr = &#39;127.0.0.1&#39;
print(&#39;Connect to server %s...&#39; % server_addr)
# ç«¯å£å’ŒéªŒè¯ç æ³¨æ„ä¿æŒä¸task_master.pyè®¾ç½®çš„å®Œå…¨ä¸€è‡´:
m = QueueManager(address=(server_addr, 5000), authkey=b&#39;abc&#39;)
# ä»ç½‘ç»œè¿æ¥:
m.connect()
# è·å–Queueçš„å¯¹è±¡:
task = m.get_task_queue()
result = m.get_result_queue()
# ä»taské˜Ÿåˆ—å–ä»»åŠ¡,å¹¶æŠŠç»“æœå†™å…¥resulté˜Ÿåˆ—:
for i in range(10):
    try:
        n = task.get(timeout=1)
        print(&#39;run task %d * %d...&#39; % (n, n))
        r = &#39;%d * %d = %d&#39; % (n, n, n*n)
        time.sleep(1)
        result.put(r)
    except Queue.Empty:
        print(&#39;task queue is empty.&#39;)
# å¤„ç†ç»“æŸ:
print(&#39;worker exit.&#39;)
</code></pre></td></tr></table>
</div>
</div><p>ä»»åŠ¡è¿›ç¨‹è¦é€šè¿‡ç½‘ç»œè¿æ¥åˆ°æœåŠ¡è¿›ç¨‹ï¼Œæ‰€ä»¥è¦æŒ‡å®šæœåŠ¡è¿›ç¨‹çš„IPã€‚</p>
<p>ç°åœ¨ï¼Œå¯ä»¥è¯•è¯•åˆ†å¸ƒå¼è¿›ç¨‹çš„å·¥ä½œæ•ˆæœäº†ã€‚å…ˆå¯åŠ¨<code>task_master.py</code>æœåŠ¡è¿›ç¨‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ python3 task_master.py 
Put task 3411...
Put task 1605...
Put task 1398...
Put task 4729...
Put task 5300...
Put task 7471...
Put task 68...
Put task 4219...
Put task 339...
Put task 7866...
Try get results...
</code></pre></td></tr></table>
</div>
</div><p><code>task_master.py</code>è¿›ç¨‹å‘é€å®Œä»»åŠ¡åï¼Œå¼€å§‹ç­‰å¾…<code>result</code>é˜Ÿåˆ—çš„ç»“æœã€‚ç°åœ¨å¯åŠ¨<code>task_worker.py</code>è¿›ç¨‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ python3 task_worker.py
Connect to server 127.0.0.1...
run task 3411 * 3411...
run task 1605 * 1605...
run task 1398 * 1398...
run task 4729 * 4729...
run task 5300 * 5300...
run task 7471 * 7471...
run task 68 * 68...
run task 4219 * 4219...
run task 339 * 339...
run task 7866 * 7866...
worker exit.
</code></pre></td></tr></table>
</div>
</div><p><code>task_worker.py</code>è¿›ç¨‹ç»“æŸï¼Œåœ¨<code>task_master.py</code>è¿›ç¨‹ä¸­ä¼šç»§ç»­æ‰“å°å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">Result: 3411 * 3411 = 11634921
Result: 1605 * 1605 = 2576025
Result: 1398 * 1398 = 1954404
Result: 4729 * 4729 = 22363441
Result: 5300 * 5300 = 28090000
Result: 7471 * 7471 = 55815841
Result: 68 * 68 = 4624
Result: 4219 * 4219 = 17799961
Result: 339 * 339 = 114921
Result: 7866 * 7866 = 61873956
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªç®€å•çš„Master/Workeræ¨¡å‹æœ‰ä»€ä¹ˆç”¨ï¼Ÿå…¶å®è¿™å°±æ˜¯ä¸€ä¸ªç®€å•ä½†çœŸæ­£çš„åˆ†å¸ƒå¼è®¡ç®—ï¼ŒæŠŠä»£ç ç¨åŠ æ”¹é€ ï¼Œå¯åŠ¨å¤šä¸ªworkerï¼Œå°±å¯ä»¥æŠŠä»»åŠ¡åˆ†å¸ƒåˆ°å‡ å°ç”šè‡³å‡ åå°æœºå™¨ä¸Šï¼Œæ¯”å¦‚æŠŠè®¡ç®—<code>n*n</code>çš„ä»£ç æ¢æˆå‘é€é‚®ä»¶ï¼Œå°±å®ç°äº†é‚®ä»¶é˜Ÿåˆ—çš„å¼‚æ­¥å‘é€ã€‚</p>
<p>Queueå¯¹è±¡å­˜å‚¨åœ¨å“ªï¼Ÿæ³¨æ„åˆ°<code>task_worker.py</code>ä¸­æ ¹æœ¬æ²¡æœ‰åˆ›å»ºQueueçš„ä»£ç ï¼Œæ‰€ä»¥ï¼ŒQueueå¯¹è±¡å­˜å‚¨åœ¨<code>task_master.py</code>è¿›ç¨‹ä¸­ï¼š</p>
<p>è€Œ<code>Queue</code>ä¹‹æ‰€ä»¥èƒ½é€šè¿‡ç½‘ç»œè®¿é—®ï¼Œå°±æ˜¯é€šè¿‡<code>QueueManager</code>å®ç°çš„ã€‚ç”±äº<code>QueueManager</code>ç®¡ç†çš„ä¸æ­¢ä¸€ä¸ª<code>Queue</code>ï¼Œæ‰€ä»¥ï¼Œè¦ç»™æ¯ä¸ª<code>Queue</code>çš„ç½‘ç»œè°ƒç”¨æ¥å£èµ·ä¸ªåå­—ï¼Œæ¯”å¦‚<code>get_task_queue</code>ã€‚</p>
<p><code>authkey</code>æœ‰ä»€ä¹ˆç”¨ï¼Ÿè¿™æ˜¯ä¸ºäº†ä¿è¯ä¸¤å°æœºå™¨æ­£å¸¸é€šä¿¡ï¼Œä¸è¢«å…¶ä»–æœºå™¨æ¶æ„å¹²æ‰°ã€‚å¦‚æœ<code>task_worker.py</code>çš„<code>authkey</code>å’Œ<code>task_master.py</code>çš„<code>authkey</code>ä¸ä¸€è‡´ï¼Œè‚¯å®šè¿æ¥ä¸ä¸Šã€‚</p>
<h3 id="å°ç»“">å°ç»“</h3>
<p>Pythonçš„åˆ†å¸ƒå¼è¿›ç¨‹æ¥å£ç®€å•ï¼Œå°è£…è‰¯å¥½ï¼Œé€‚åˆéœ€è¦æŠŠç¹é‡ä»»åŠ¡åˆ†å¸ƒåˆ°å¤šå°æœºå™¨çš„ç¯å¢ƒä¸‹ã€‚</p>
<p>æ³¨æ„Queueçš„ä½œç”¨æ˜¯ç”¨æ¥ä¼ é€’ä»»åŠ¡å’Œæ¥æ”¶ç»“æœï¼Œæ¯ä¸ªä»»åŠ¡çš„æè¿°æ•°æ®é‡è¦å°½é‡å°ã€‚æ¯”å¦‚å‘é€ä¸€ä¸ªå¤„ç†æ—¥å¿—æ–‡ä»¶çš„ä»»åŠ¡ï¼Œå°±ä¸è¦å‘é€å‡ ç™¾å…†çš„æ—¥å¿—æ–‡ä»¶æœ¬èº«ï¼Œè€Œæ˜¯å‘é€æ—¥å¿—æ–‡ä»¶å­˜æ”¾çš„å®Œæ•´è·¯å¾„ï¼Œç”±Workerè¿›ç¨‹å†å»å…±äº«çš„ç£ç›˜ä¸Šè¯»å–æ–‡ä»¶ã€‚</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2016-04-30</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B/index.md" target="_blank">é˜…è¯»åŸå§‹æ–‡æ¡£</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="http://www.nishinonanase.xyz/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B/" data-title="åˆ†å¸ƒå¼è¿›ç¨‹" data-hashtags="Python"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="http://www.nishinonanase.xyz/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B/" data-hashtag="Python"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Hacker News" data-sharer="hackernews" data-url="http://www.nishinonanase.xyz/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B/" data-title="åˆ†å¸ƒå¼è¿›ç¨‹"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="http://www.nishinonanase.xyz/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B/" data-title="åˆ†å¸ƒå¼è¿›ç¨‹"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="http://www.nishinonanase.xyz/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B/" data-title="åˆ†å¸ƒå¼è¿›ç¨‹" data-ralateuid="5146819796"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° ç™¾åº¦" data-sharer="baidu" data-url="http://www.nishinonanase.xyz/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%9B%E7%A8%8B/" data-title="åˆ†å¸ƒå¼è¿›ç¨‹"><i data-svg-src="/lib/simple-icons/icons/baidu.min.svg"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/python/">Python</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/threadlocal/" class="prev" rel="prev" title="ThreadLocal"><i class="fas fa-angle-left fa-fw"></i>ThreadLocal</a>
            <a href="/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="next" rel="next" title="æ­£åˆ™è¡¨è¾¾å¼">æ­£åˆ™è¡¨è¾¾å¼<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">ç”±<a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.68.3">Hugo</a> é©±åŠ¨ | ä¸»é¢˜-<a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a> | ä¹ƒæœ¨å‚46
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2016 - 2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://www.nishinonanase.xyz/" target="_blank">ä¹¦å…°</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp"><a target="_blank" href="https://weibo.com/u/7266809683">æ¬¢è¿å¾®åšå…³æ³¨@è¥¿é‡ä¸ƒç€¬</a></span></div>
            
        </div>
    </footer><script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"/>
<script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/autoload.js"></script>
<script src="//code.tidio.co/mgdmc4exqjpbup34exmzydwklocwhab7.js" async></script></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><link rel="stylesheet" href="https://cdn.example.com/some.css"><script type="text/javascript" src="/lib/valine/Valine.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/twemoji/twemoji.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript" src="https://cdn.example.com/some.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":10},"comment":{"valine":{"appId":"pYP10MBmXAHPlpAH6etQREAF-gzGzoHsz","appKey":"U85Rh0XAdTAh3amYgmCcv8no","avatar":"mm","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@5.0.1/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":true,"highlight":true,"lang":"zh-cn","pageSize":10,"placeholder":"ä½ çš„è¯„è®º ...","recordIP":true,"visitor":true}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"twemoji":true};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
